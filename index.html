<tableau-viz 
    id="tableauViz"
    src="https://10ay.online.tableau.com/t/forsightanalytics-c7b8da01a7/views/EmailPerformancebyCampaign/EmailPerformancebyCampaign"
    width="1912"
    height="914"
    hide-tabs
    toolbar="bottom"
    connected-app-id="c4d4592f-bbbb-4a60-b4f5-546f07b29cd0">
</tableau-viz>

<script>
document.addEventListener("DOMContentLoaded", function() {
    const tableauViz = document.getElementById('tableauViz');

    // âœ… Use the newly generated JWT
    const token = "eyJhbGciOiJIUzI1NiIsImtpZCI6ImE5MjcwYzg4LWFhMGItNGNmOS1hZGFhLWY3MWZmYTk4NTIyYyIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJjNGQ0NTkyZi1iYmJiLTRhNjAtYjRmNS01NDZmMDdiMjljZDAiLCJleHAiOjE3NDIzNjE0NjQsImp0aSI6IjI1ZWM1MjQxLTdhZmEtNGUzYy1hNjg4LWFlMGI2NzBkYjFmOSIsImF1ZCI6InRhYmxlYXUiLCJzdWIiOiJmb3JzaWdodGFuYWx5dGljc0BnbWFpbC5jb20iLCJzY3AiOlsidGFibGVhdTp2aWV3czplbWJlZCJdfQ.V4D9pALZg_ddKbXIyupI19_n6pikRzjpsA7XZ8pG-LU"; 

    tableauViz.token = token;  // âœ… Assign JWT dynamically

    console.log("ðŸ”‘ JWT Assigned:", tableauViz.token);

    tableauViz.addEventListener("vizLoadError", (e) => {
        console.error("âŒ Tableau Viz Load Error:", e.detail);
    });

    tableauViz.addEventListener("firstInteractive", function() {
        console.log("âœ… Tableau Viz Loaded Successfully!");
    });

    // âœ… Debugging: Verify the token is being applied
    setTimeout(() => {
        console.log("ðŸ”Ž Current Token in DOM:", tableauViz.token);
    }, 1000);
});
</script>
